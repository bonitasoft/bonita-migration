<?xml version="1.0" encoding="UTF-8"?>
<processDefinition xmlns="http://www.bonitasoft.org/ns/process/client/6.3" bos_version="6.0-SNAPSHOT" description="" displayDescription="" name="DPerm-DI-Traitement" version="1.5.1">
  <stringIndexes>
    <stringIndex index="1"/>
    <stringIndex index="2"/>
    <stringIndex index="3"/>
    <stringIndex index="4"/>
    <stringIndex index="5"/>
  </stringIndexes>
  <flowElements>
    <transitions>
      <transition id="2588085312356109043" name="TRAITEMENT_MET_TRAITER_MANUELLE_-&gt;_Fin traité" source="-8596284356631925361" target="-8988845734914743353"/>
      <transition id="1391443008402771653" name="Demande Attribution_-&gt;_Traitement DI" source="-8156494243728390101" target="-8331691340677704184"/>
      <transition id="338639496810381054" name="Indiquer Cloture TRAITEMENT_MET_DOCUMENT_TAXE_-&gt;_Fin cloture" source="-8298166880827586399" target="-6927032641581010587"/>
      <transition id="369489302300739051" name="Cloturer ?_-&gt;_Traitement manuel" source="-6031680921442043495" target="-5275259712155765340">
        <condition expressionType="TYPE_VARIABLE" interpreter="" name="traitementMetier" returnType="java.lang.Boolean" id="6125526691227069144">
          <content>traitementMetier</content>
        </condition>
      </transition>
      <transition id="1553663755118460954" name="Traiter Evt Batch cloture_-&gt;_Cloturer auto ?" source="-8571678104023152293" target="-6842132174994984576"/>
      <transition id="3788837784295851534" name="EvtBatchClotureTaxation_-&gt;_Traiter Evt Batch cloture" source="-6492756262163414757" target="-8571678104023152293"/>
      <transition id="734739271986791573" name="Traitement ?_-&gt;_Traitement auto" source="-6339559044712506375" target="-6978575636377187818">
        <condition expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="codeSortieTraiterAuto" returnType="java.lang.Boolean" id="5511476283213528432">
          <content>codeSortie=="TraiterAuto"</content>
          <expression expressionType="TYPE_VARIABLE" name="codeSortie" returnType="java.lang.String" id="5989357265917318920">
            <content>codeSortie</content>
          </expression>
        </condition>
      </transition>
      <transition id="3014373776453878543" name="Début traitement_-&gt;_Demander intégrer DI" source="-5489198489153644616" target="-8815616071053396167"/>
      <transition id="5198436680118156887" name="Cloturer auto ?_-&gt;_Histo cloturée semiAuto" source="-6842132174994984576" target="-7846411466357676893">
        <condition expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="codeSegmentSM" returnType="java.lang.Boolean" id="9158447025104889652">
          <content>codeSegment=="SM"</content>
          <expression expressionType="TYPE_VARIABLE" name="codeSegment" returnType="java.lang.String" id="9102182720638105180">
            <content>codeSegment</content>
          </expression>
        </condition>
      </transition>
      <transition id="6868548473501470257" name="Traitement ?_-&gt;_TRAITEMENT_MET_TRAITER_MANUELLE" source="-6339559044712506375" target="-8596284356631925361">
        <condition expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="codeSortieTraiter" returnType="java.lang.Boolean" id="8572292447041486847">
          <content>codeSortie=="Traiter"</content>
          <expression expressionType="TYPE_VARIABLE" name="codeSortie" returnType="java.lang.String" id="7439079706124731987">
            <content>codeSortie</content>
          </expression>
        </condition>
      </transition>
      <transition id="170971691103468458" name="Histo cloturée semiAuto_-&gt;_sortie taxation semi-auto" source="-7846411466357676893" target="-8012073888500614945"/>
      <transition id="2684925251474338585" name="Demander intégrer DI_-&gt;_RecevoirReponseIntegrerDI" source="-8815616071053396167" target="-6897610475471751179"/>
      <transition id="2618113229880968111" name="Traitement DI_-&gt;_Traitement ?" source="-8331691340677704184" target="-6339559044712506375"/>
      <transition id="4556476553679255878" name="Cloturer auto ?_-&gt;_Histo cloture auto" source="-6842132174994984576" target="-8579984294774500902"/>
      <transition id="4745710561266191839" name="Traitement auto_-&gt;_EvtBatchClotureTaxation" source="-6978575636377187818" target="-6492756262163414757"/>
      <transition id="5364657009225714086" name="Traitement ?_-&gt;_Indiquer Cloture TRAITEMENT_MET_DOCUMENT_TAXE" source="-6339559044712506375" target="-8298166880827586399"/>
      <transition id="3129635953385098273" name="Histo cloture auto_-&gt;_sortie taxation auto" source="-8579984294774500902" target="-6013970785068268540"/>
      <transition id="256124419488239139" name="Cloture Auto_-&gt;_Traitement auto" source="-8433916013872901478" target="-6978575636377187818"/>
      <transition id="6718796719052403711" name="Traitement manuel_-&gt;_Demande Attribution" source="-5275259712155765340" target="-8156494243728390101"/>
      <transition id="4092077990966441505" name="RecevoirReponseIntegrerDI_-&gt;_Cloturer ?" source="-6897610475471751179" target="-6031680921442043495"/>
      <transition id="346522929945294218" name="Cloturer auto ?_-&gt;_Traitement manuel" source="-6842132174994984576" target="-5275259712155765340">
        <condition expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="nonCLOTURE" returnType="java.lang.Boolean" id="5849669286900623036">
          <content>evtBatchType != "CLOTURE"</content>
          <expression expressionType="TYPE_VARIABLE" name="evtBatchType" returnType="java.lang.String" id="4621619588109543470">
            <content>evtBatchType</content>
          </expression>
        </condition>
      </transition>
      <transition id="2297131498812849556" name="Cloturer ?_-&gt;_Cloture Auto" source="-6031680921442043495" target="-8433916013872901478"/>
    </transitions>
    <connectors/>
    <dataDefinitions>
      <textDataDefinition className="java.lang.String" longText="true" name="groupeCandidatTraitement" transient="false"/>
      <dataDefinition className="java.lang.Double" name="montant" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="npa" transient="false"/>
      <dataDefinition className="java.lang.Integer" name="numeroTiers" transient="false"/>
      <dataDefinition className="java.lang.Integer" name="periodeFiscale" transient="false"/>
      <dataDefinition className="java.lang.Integer" name="dateNaissance" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="actionFin" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="codeSortie" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="motifSortie" transient="false"/>
      <dataDefinition className="java.util.Date" name="dateReceptionDocument" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="documentType" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="documentSousType" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="identifiantRepertoireElectronique" transient="false"/>
      <dataDefinition className="java.lang.Integer" name="numeroOid" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="typeImpot" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="messageCorrelationId" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="identifiantSupervision" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="lastMessageContent" transient="false"/>
      <dataDefinition className="java.lang.Boolean" name="traitementMetier" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="visaDossierReserve" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="visaPreferentiel" transient="false"/>
      <dataDefinition className="java.lang.Float" name="poidsTacheTraitementMetier" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="typeTacheTraitementMetier" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="pays" transient="false"/>
      <dataDefinition className="java.lang.Long" name="utilisateurTraitementMetierId" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="codeSegment" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="documentContentUrl" transient="false"/>
      <dataDefinition className="java.lang.Long" name="numeroAVS13" transient="false"/>
      <dataDefinition className="java.util.Date" name="dateDeterminante" transient="false"/>
      <dataDefinition className="java.util.Date" name="horodatage" transient="false"/>
      <dataDefinition className="java.lang.Boolean" name="controleIA" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="etatTaxation" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="typeTaxation" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="identifiantTache" transient="false"/>
      <dataDefinition className="java.lang.Boolean" name="releveFiscalBancaire" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="actionAbandon" transient="false"/>
      <dataDefinition className="java.lang.Long" name="idTacheMetier" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="evtBatchType" transient="false">
        <defaultValue expressionType="TYPE_CONSTANT" interpreter="" name="evtBatchType" returnType="java.lang.String" id="8364706970300703654">
          <content>evtBatchType</content>
        </defaultValue>
      </textDataDefinition>
      <textDataDefinition className="java.lang.String" longText="true" name="nomPrenoms" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="regleAttribution" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="doublonTypeTaxation" transient="false"/>
      <dataDefinition className="java.lang.Boolean" name="assujettissement360" transient="false"/>
      <dataDefinition className="java.lang.Boolean" name="contribuableSourcierMixte" transient="false"/>
      <dataDefinition className="java.lang.Integer" name="dateDeces" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="bamProcessInstanceId" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="bamProcessDefinitionId" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="visaUtilisateurTache" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="typeAssujettissement" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="note" transient="false"/>
      <dataDefinition className="ch.vd.bpm.dperm.beans.IdentifiantArchivage" name="identifiantArchiveXMLUnitaire" transient="false"/>
      <dataDefinition className="java.lang.Long" name="traitementDiTaskBusinessId" transient="false"/>
      <textDataDefinition className="java.lang.String" longText="true" name="support" transient="false"/>
      <dataDefinition className="java.lang.Integer" name="ctbAssujettiOID" transient="false"/>
    </dataDefinitions>
    <documentDefinitions/>
    <flowNodes>
      <automaticTask description="la DI doit être intégrée dans TAOPP" id="-8815616071053396167" name="Demander intégrer DI">
        <incomingTransition idref="3014373776453878543"/>
        <outgoingTransition idref="2684925251474338585"/>
        <connector activationEvent="ON_ENTER" connectorId="EsbVdJmsSendRequest" failAction="FAIL" name="integrerDi" version="1.0.0">
          <inputs>
            <input name="headers">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="headersBam" returnType="java.util.Map" id="7007430369941661180">
                <content>[
	'processInstanceId':bamProcessInstanceId,
	'processDefinitionId':bamProcessDefinitionId
]</content>
                <expression expressionType="TYPE_ENGINE_CONSTANT" interpreter="" name="processInstanceId" returnType="java.lang.Long" id="5181976122970251667">
                  <content>processInstanceId</content>
                </expression>
                <expression expressionType="TYPE_ENGINE_CONSTANT" interpreter="" name="processDefinitionId" returnType="java.lang.Long" id="9066863982993834334">
                  <content>processDefinitionId</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="bamProcessInstanceId" returnType="java.lang.String" id="4644239644302740601">
                  <content>bamProcessInstanceId</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="bamProcessDefinitionId" returnType="java.lang.String" id="6738071715753706017">
                  <content>bamProcessDefinitionId</content>
                </expression>
              </expression>
            </input>
            <input name="serviceReplyTo">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbDestinationRetourBonita" returnType="java.lang.String" id="5656751131607477372">
                <content>esbDestinationRetourBonita</content>
              </expression>
            </input>
            <input name="body">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="body" returnType="java.lang.Object" id="7154878788218564346">
                <content>import ch.vd.bpm.dperm.util.DpermValidator;



def writer = new StringWriter()

def xml = new groovy.xml.MarkupBuilder(writer)

xml.'elementsIntegrationMetier'(

		'xmlns':'http://www.vd.ch/fiscalite/dperm/taopp/elementsIntegrationMetier/1'

) {

	'periodeFiscale'(periodeFiscale)

	'numeroContribuable'(numeroTiers)

	'xmlUnitaire' {

		'typeDossier'(identifiantArchiveXMLUnitaire.getFolderType())

		'nomDossier'(identifiantArchiveXMLUnitaire.getFolderName())

		'typeArchive'(identifiantArchiveXMLUnitaire.getDocType())

		'identifiantArchive'(identifiantArchiveXMLUnitaire.getDocName())

	}

}

def xmlStr = writer.toString()

DpermValidator.validate(xmlStr)

return xmlStr</content>
                <expression expressionType="TYPE_VARIABLE" name="numeroTiers" returnType="java.lang.Integer" id="7434067330348063042">
                  <content>numeroTiers</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="periodeFiscale" returnType="java.lang.Integer" id="6974375520165603296">
                  <content>periodeFiscale</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="identifiantArchiveXMLUnitaire" returnType="ch.vd.bpm.dperm.beans.IdentifiantArchivage" id="7289358077277272746">
                  <content>identifiantArchiveXMLUnitaire</content>
                </expression>
              </expression>
            </input>
            <input name="application">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomApplication" returnType="java.lang.String" id="6270173024992666858">
                <content>esbNomApplication</content>
              </expression>
            </input>
            <input name="contentAsUrl">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="7172107347385348930">
                <content>true</content>
              </expression>
            </input>
            <input name="domaine">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomDomaine" returnType="java.lang.String" id="7153182296913988319">
                <content>esbNomDomaine</content>
              </expression>
            </input>
            <input name="contexte">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="integrerDi" returnType="java.lang.String" id="4712943813884331234">
                <content>integrerDi</content>
              </expression>
            </input>
            <input name="messageName">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="ReponseIntegrerDI" returnType="java.lang.String" id="4867100775109071004">
                <content>ReponseIntegrerDI</content>
              </expression>
            </input>
            <input name="destination">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbDestinationIntegrerDI" returnType="java.lang.String" id="6555030473346945932">
                <content>esbDestinationIntegrerDI</content>
              </expression>
            </input>
            <input name="businessUser">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="bpm" returnType="java.lang.String" id="5044643632541821565">
                <content>bpm</content>
              </expression>
            </input>
            <input name="connectionFactoryJndiName">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="java:comp/env/activemq" returnType="java.lang.String" id="9118327980739438457">
                <content>java:comp/env/activemq</content>
              </expression>
            </input>
            <input name="bonitaInstance">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbBonitaInstance" returnType="java.lang.String" id="5348683809786336172">
                <content>esbBonitaInstance</content>
              </expression>
            </input>
            <input name="attachmentUrls">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="dataDocumentContentUrl" returnType="java.util.Map" id="6733602112882566994">
                <content>[data:documentContentUrl]</content>
                <expression expressionType="TYPE_VARIABLE" name="documentContentUrl" returnType="java.lang.String" id="5365798515719959544">
                  <content>documentContentUrl</content>
                </expression>
              </expression>
            </input>
            <input name="businessId">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="IntegrerDi-CTB-PF-" returnType="java.lang.String" id="9096286203314742117">
                <content>"IntegrerDi-"+numeroTiers+"-"+periodeFiscale+"-"</content>
                <expression expressionType="TYPE_VARIABLE" name="numeroTiers" returnType="java.lang.Integer" id="6397386951503252951">
                  <content>numeroTiers</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="periodeFiscale" returnType="java.lang.Integer" id="7895603668561025718">
                  <content>periodeFiscale</content>
                </expression>
              </expression>
            </input>
            <input name="targetFlowNode">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="RecevoirReponseIntegrerDI" returnType="java.lang.String" id="7428088879711555055">
                <content>RecevoirReponseIntegrerDI</content>
              </expression>
            </input>
          </inputs>
          <outputs>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="messageCorrelationId" type="DATA"/>
              <rightOperand expressionType="TYPE_INPUT" interpreter="" name="correlationId" returnType="java.lang.String" id="5740833232590140392">
                <content>correlationId</content>
              </rightOperand>
            </operation>
          </outputs>
        </connector>
        <connector activationEvent="ON_ENTER" connectorId="scripting-groovy" failAction="FAIL" name="compatibiliteOID" version="1.0.0">
          <inputs>
            <input name="script">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="compatibiliteOID" returnType="java.lang.Object" id="4637672555045531897">
                <content>numeroOid != null ? numeroOid : ctbAssujettiOID</content>
                <expression expressionType="TYPE_VARIABLE" name="numeroOid" returnType="java.lang.Integer" id="6881893114822774071">
                  <content>numeroOid</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="ctbAssujettiOID" returnType="java.lang.Integer" id="9103643498730961284">
                  <content>ctbAssujettiOID</content>
                </expression>
              </expression>
            </input>
          </inputs>
          <outputs>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="numeroOid" type="DATA"/>
              <rightOperand expressionType="TYPE_INPUT" interpreter="" name="result" returnType="java.lang.Object" id="4744850977875103943">
                <content>result</content>
              </rightOperand>
            </operation>
          </outputs>
        </connector>
        <dataDefinitions/>
        <operations/>
        <boundaryEvents/>
      </automaticTask>
      <callActivity callableElementType="PROCESS" id="-8156494243728390101" name="Demande Attribution">
        <incomingTransition idref="6718796719052403711"/>
        <outgoingTransition idref="1391443008402771653"/>
        <connector activationEvent="ON_ENTER" connectorId="HistoriqueDperm" failAction="FAIL" name="histoCreateTache" version="1.5.0">
          <inputs>
            <input name="jmsConnectionFactory">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="java:comp/env/activemq" returnType="java.lang.String" id="8627535276066117633">
                <content>java:comp/env/activemq</content>
              </expression>
            </input>
            <input name="historique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="7558924787012231472">
                <content>true</content>
              </expression>
            </input>
            <input name="codeApplication">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="BPMS" returnType="java.lang.String" id="5189344411585077521">
                <content>BPMS</content>
              </expression>
            </input>
            <input name="codeOperation">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="TRAITEMENT_MET_DEMANDE_CREATE_TACHE" returnType="java.lang.String" id="8951859946143294720">
                <content>TRAITEMENT_MET_DEMANDE_CREATE_TACHE</content>
              </expression>
            </input>
            <input name="esbApplication">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomApplication" returnType="java.lang.String" id="5065953056565738376">
                <content>esbNomApplication</content>
              </expression>
            </input>
            <input name="identifiantRepelec">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantRepertoireElectronique" returnType="java.lang.String" id="5590371819570107549">
                <content>identifiantRepertoireElectronique</content>
              </expression>
            </input>
            <input name="visaUtilisateur">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="visaUtilisateurSource" returnType="java.lang.String" id="6732566233360724544">
                <content>visaUtilisateurSource</content>
              </expression>
            </input>
            <input name="esbDestinationHistorique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="integrerKpiDossierPermanent" returnType="java.lang.String" id="5216176991256954584">
                <content>integrerKpiDossierPermanent</content>
              </expression>
            </input>
            <input name="identifiantSupervision">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantSupervision" returnType="java.lang.String" id="6653800480250395444">
                <content>identifiantSupervision</content>
              </expression>
            </input>
            <input name="esbDomaine">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomDomaine" returnType="java.lang.String" id="8839957172846257715">
                <content>esbNomDomaine</content>
              </expression>
            </input>
            <input name="evtProcessus">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="7485245995653568683">
                <content>true</content>
              </expression>
            </input>
            <input name="caracteristiques">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="map" returnType="java.util.Map" id="5060288785404541584">
                <content>def map = ["documentType":documentType,

	"documentSousType":documentSousType,

	"periodeFiscale":periodeFiscale,

	"montant":montant,

	"dateReception":dateReceptionDocument,

	"numeroContribuable":numeroTiers,

	"nomPrenoms":nomPrenoms,

	"numeroAVS13":numeroAVS13,

	"dateNaissance":dateNaissance,

	"numeroOid" : numeroOid,

	"support":support]</content>
                <expression expressionType="TYPE_VARIABLE" name="numeroOid" returnType="java.lang.Integer" id="6321959879473912133">
                  <content>numeroOid</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentSousType" returnType="java.lang.String" id="5525645585969014624">
                  <content>documentSousType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentType" returnType="java.lang.String" id="9192298840649194468">
                  <content>documentType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateReceptionDocument" returnType="java.util.Date" id="7575072626987510493">
                  <content>dateReceptionDocument</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="nomPrenoms" returnType="java.lang.String" id="7811155903770644980">
                  <content>nomPrenoms</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="support" returnType="java.lang.String" id="8139431294944204293">
                  <content>support</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="montant" returnType="java.lang.Double" id="7599453127122971245">
                  <content>montant</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateNaissance" returnType="java.lang.Integer" id="8188308053911883509">
                  <content>dateNaissance</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroTiers" returnType="java.lang.Integer" id="5335445965846452611">
                  <content>numeroTiers</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroAVS13" returnType="java.lang.Long" id="6314630859090564027">
                  <content>numeroAVS13</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="periodeFiscale" returnType="java.lang.Integer" id="8946682174483056512">
                  <content>periodeFiscale</content>
                </expression>
              </expression>
            </input>
          </inputs>
          <outputs/>
        </connector>
        <connector activationEvent="ON_FINISH" connectorId="HistoriqueDperm" failAction="FAIL" name="histoAttributionDi" version="1.5.0">
          <inputs>
            <input name="historique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="7504718438917614260">
                <content>true</content>
              </expression>
            </input>
            <input name="jmsConnectionFactory">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="java:comp/env/activemq" returnType="java.lang.String" id="4939190066953897973">
                <content>java:comp/env/activemq</content>
              </expression>
            </input>
            <input name="codeOperation">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="TRAITEMENT_MET_ATTRIBUTION_TACHE" returnType="java.lang.String" id="7484076250314378294">
                <content>"TRAITEMENT_MET_ATTRIBUTION_TACHE_"+regleAttribution</content>
                <expression expressionType="TYPE_VARIABLE" name="regleAttribution" returnType="java.lang.String" id="6025125134526152546">
                  <content>regleAttribution</content>
                </expression>
              </expression>
            </input>
            <input name="esbApplication">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomApplication" returnType="java.lang.String" id="6310417246771669708">
                <content>esbNomApplication</content>
              </expression>
            </input>
            <input name="identifiantRepelec">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantRepertoireElectronique" returnType="java.lang.String" id="8168712709567526531">
                <content>identifiantRepertoireElectronique</content>
              </expression>
            </input>
            <input name="valeurAprès">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="utilisateurOUgroupeCandidatTraitement" returnType="java.lang.String" id="8355327598240889300">
                <content>visaUtilisateurTache ? visaUtilisateurTache : groupeCandidatTraitement</content>
                <expression expressionType="TYPE_VARIABLE" name="visaUtilisateurTache" returnType="java.lang.String" id="6981258929530614665">
                  <content>visaUtilisateurTache</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="groupeCandidatTraitement" returnType="java.lang.String" id="6319242702868890106">
                  <content>groupeCandidatTraitement</content>
                </expression>
              </expression>
            </input>
            <input name="identifiantSupervision">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantSupervision" returnType="java.lang.String" id="5146716908407878402">
                <content>identifiantSupervision</content>
              </expression>
            </input>
            <input name="esbDomaine">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomDomaine" returnType="java.lang.String" id="8623311208977730044">
                <content>esbNomDomaine</content>
              </expression>
            </input>
            <input name="evtProcessus">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="false" returnType="java.lang.Boolean" id="5128948876169748964">
                <content>false</content>
              </expression>
            </input>
            <input name="caracteristiques">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="map" returnType="java.util.Map" id="4989558230100488475">
                <content>def map = ["documentType":documentType,

	"documentSousType":documentSousType,

	"periodeFiscale":periodeFiscale,

	"montant":montant,

	"dateReception":dateReceptionDocument,

	"numeroTiersIdentifie":numeroTiers,

	"nomPrenoms":nomPrenoms,

	"numeroAVS13":numeroAVS13,

	"dateNaissance":dateNaissance,

	"numeroOid" : numeroOid,

	"support":support]</content>
                <expression expressionType="TYPE_VARIABLE" name="numeroOid" returnType="java.lang.Integer" id="7965036692137745856">
                  <content>numeroOid</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentSousType" returnType="java.lang.String" id="8281895599944771551">
                  <content>documentSousType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="support" returnType="java.lang.String" id="7612833022192625442">
                  <content>support</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="nomPrenoms" returnType="java.lang.String" id="7261797068782360875">
                  <content>nomPrenoms</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentType" returnType="java.lang.String" id="5731563258059524182">
                  <content>documentType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateReceptionDocument" returnType="java.util.Date" id="6819900126812092171">
                  <content>dateReceptionDocument</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateNaissance" returnType="java.lang.Integer" id="5870326350288319058">
                  <content>dateNaissance</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="montant" returnType="java.lang.Double" id="7135594884858719643">
                  <content>montant</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroTiers" returnType="java.lang.Integer" id="5830307760235835301">
                  <content>numeroTiers</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroAVS13" returnType="java.lang.Long" id="6519084031602139023">
                  <content>numeroAVS13</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="periodeFiscale" returnType="java.lang.Integer" id="7743003603378382825">
                  <content>periodeFiscale</content>
                </expression>
              </expression>
            </input>
            <input name="typeTache">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="typeTacheTraitementMetier" returnType="java.lang.String" id="8928038113287799734">
                <content>typeTacheTraitementMetier</content>
              </expression>
            </input>
            <input name="codeApplication">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="BPMS" returnType="java.lang.String" id="7102567523971784482">
                <content>BPMS</content>
              </expression>
            </input>
            <input name="visaUtilisateur">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="visaUtilisateurSource" returnType="java.lang.String" id="8224150901077848208">
                <content>visaUtilisateurSource</content>
              </expression>
            </input>
            <input name="esbDestinationHistorique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="integrerKpiDossierPermanent" returnType="java.lang.String" id="8381177630755050131">
                <content>integrerKpiDossierPermanent</content>
              </expression>
            </input>
          </inputs>
          <outputs/>
        </connector>
        <dataDefinitions/>
        <operations>
          <operation operatorType="ASSIGNMENT">
            <leftOperand name="visaUtilisateurTache" type="DATA"/>
            <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="getUsername" returnType="java.lang.String" id="8939892110931967542">
              <content>import org.slf4j.LoggerFactory;

def username = null

if( utilisateurTraitementMetierId!= null) {
	try {
		username = apiAccessor.getIdentityAPI().getUser(utilisateurTraitementMetierId).getUserName()
	} catch(Exception ex) {
		LoggerFactory.getLogger("ch.vd.bpm.dperm.groovy").warn("impossible de trouver le username pour l'id "+utilisateurTraitementMetierId,ex);
	}
}

return username</content>
              <expression expressionType="TYPE_ENGINE_CONSTANT" interpreter="" name="apiAccessor" returnType="com.bonitasoft.engine.api.APIAccessor" id="6146154458922819826">
                <content>apiAccessor</content>
              </expression>
              <expression expressionType="TYPE_VARIABLE" name="utilisateurTraitementMetierId" returnType="java.lang.Long" id="7903430678711308504">
                <content>utilisateurTraitementMetierId</content>
              </expression>
            </rightOperand>
          </operation>
        </operations>
        <boundaryEvents/>
        <callableElement expressionType="TYPE_CONSTANT" interpreter="" name="DPerm-AttributionMetier" returnType="java.lang.String" id="5622570619340465344">
          <content>DPerm-AttributionMetier</content>
        </callableElement>
        <callableElementVersion expressionType="TYPE_PARAMETER" interpreter="" name="versionProcessAttribution" returnType="java.lang.String" id="7732158587359673925">
          <content>versionProcessAttribution</content>
        </callableElementVersion>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="visaDernierModificateur" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="visaPreferentiel" returnType="java.lang.String" id="5207989934322380870">
            <content>visaPreferentiel</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="visaDossierReserve" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="visaDossierReserve" returnType="java.lang.String" id="7319399814281860151">
            <content>visaDossierReserve</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="numeroTiers" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="numeroTiers" returnType="java.lang.Integer" id="5841116672417868643">
            <content>numeroTiers</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="periodeFiscale" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="periodeFiscale" returnType="java.lang.Integer" id="4650725571292088812">
            <content>periodeFiscale</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="typeImpot" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="typeImpot" returnType="java.lang.String" id="5949250553008925976">
            <content>typeImpot</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="numeroOid" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="numeroOid" returnType="java.lang.Integer" id="9150757837718402117">
            <content>numeroOid</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="documentSousType" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="documentSousType" returnType="java.lang.String" id="8705559316063455410">
            <content>documentSousType</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="documentType" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="documentType" returnType="java.lang.String" id="6700508617127666116">
            <content>documentType</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="typeTaxation" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="typeTaxation" returnType="java.lang.String" id="5724237109358617771">
            <content>typeTaxation</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="etatTaxation" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="etatTaxation" returnType="java.lang.String" id="4764172143064329896">
            <content>etatTaxation</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="codeSegment" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="codeSegment" returnType="java.lang.String" id="7446727665424409975">
            <content>codeSegment</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="releveFiscalBancaire" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="releveFiscalBancaire" returnType="java.lang.Boolean" id="5973301333745428362">
            <content>releveFiscalBancaire</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="controleIA" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="controleIA" returnType="java.lang.Boolean" id="9136104879109935151">
            <content>controleIA</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="doublonTypeTaxation" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="doublonTypeTaxation" returnType="java.lang.String" id="9159624845695419418">
            <content>doublonTypeTaxation</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="assujettissement360" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="assujettissement360" returnType="java.lang.Boolean" id="8746608785782181948">
            <content>assujettissement360</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="contribuableSourcierMixte" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="contribuableSourcierMixte" returnType="java.lang.Boolean" id="7345264670497305349">
            <content>contribuableSourcierMixte</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="dateDeces" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="dateDeces" returnType="java.lang.Integer" id="5388916089371271302">
            <content>dateDeces</content>
          </rightOperand>
        </dataInputOperation>
        <dataInputOperation operatorType="ASSIGNMENT">
          <leftOperand name="typeAssujettissement" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="typeAssujettissement" returnType="java.lang.String" id="6752444801701813876">
            <content>typeAssujettissement</content>
          </rightOperand>
        </dataInputOperation>
        <dataOutputOperation operatorType="ASSIGNMENT">
          <leftOperand name="groupeCandidatTraitement" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="groupeCandidat" returnType="java.lang.String" id="7303249493365277891">
            <content>groupeCandidat</content>
          </rightOperand>
        </dataOutputOperation>
        <dataOutputOperation operatorType="ASSIGNMENT">
          <leftOperand name="utilisateurTraitementMetierId" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="utilisateurTraitementMetierId" returnType="java.lang.Long" id="5060163727717358971">
            <content>utilisateurTraitementMetierId</content>
          </rightOperand>
        </dataOutputOperation>
        <dataOutputOperation operatorType="ASSIGNMENT">
          <leftOperand name="poidsTacheTraitementMetier" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="poidsTache" returnType="java.lang.Float" id="5458549815024190703">
            <content>poidsTache</content>
          </rightOperand>
        </dataOutputOperation>
        <dataOutputOperation operatorType="ASSIGNMENT">
          <leftOperand name="typeTacheTraitementMetier" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="typeTache" returnType="java.lang.String" id="8456918448586425763">
            <content>typeTache</content>
          </rightOperand>
        </dataOutputOperation>
        <dataOutputOperation operatorType="ASSIGNMENT">
          <leftOperand name="regleAttribution" type="DATA"/>
          <rightOperand expressionType="TYPE_VARIABLE" name="regleAttribution" returnType="java.lang.String" id="5560116029578954671">
            <content>regleAttribution</content>
          </rightOperand>
        </dataOutputOperation>
      </callActivity>
      <automaticTask id="-8433916013872901478" name="Cloture Auto">
        <incomingTransition idref="2297131498812849556"/>
        <outgoingTransition idref="256124419488239139"/>
        <connector activationEvent="ON_FINISH" connectorId="HistoriqueDperm" failAction="FAIL" name="histoPasCreationTache" version="1.5.0">
          <inputs>
            <input name="jmsConnectionFactory">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="java:comp/env/activemq" returnType="java.lang.String" id="5534497592323878268">
                <content>java:comp/env/activemq</content>
              </expression>
            </input>
            <input name="historique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="8978299885268215005">
                <content>true</content>
              </expression>
            </input>
            <input name="codeApplication">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="BPMS" returnType="java.lang.String" id="5780241061141702067">
                <content>BPMS</content>
              </expression>
            </input>
            <input name="codeOperation">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="TRAITEMENT_MET_PAS_CREATE_TACHE" returnType="java.lang.String" id="5455300965380383287">
                <content>TRAITEMENT_MET_PAS_CREATE_TACHE</content>
              </expression>
            </input>
            <input name="esbApplication">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomApplication" returnType="java.lang.String" id="6185296726805234612">
                <content>esbNomApplication</content>
              </expression>
            </input>
            <input name="identifiantRepelec">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantRepertoireElectronique" returnType="java.lang.String" id="6114279713538425724">
                <content>identifiantRepertoireElectronique</content>
              </expression>
            </input>
            <input name="visaUtilisateur">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="visaUtilisateurSource" returnType="java.lang.String" id="5563412639940330576">
                <content>visaUtilisateurSource</content>
              </expression>
            </input>
            <input name="esbDestinationHistorique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="integrerKpiDossierPermanent" returnType="java.lang.String" id="8039728360535560901">
                <content>integrerKpiDossierPermanent</content>
              </expression>
            </input>
            <input name="identifiantSupervision">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantSupervision" returnType="java.lang.String" id="8110857106371906618">
                <content>identifiantSupervision</content>
              </expression>
            </input>
            <input name="esbDomaine">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomDomaine" returnType="java.lang.String" id="9055827073691883664">
                <content>esbNomDomaine</content>
              </expression>
            </input>
            <input name="evtProcessus">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="6309844316490930058">
                <content>true</content>
              </expression>
            </input>
            <input name="caracteristiques">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="map" returnType="java.util.Map" id="7191626569250038013">
                <content>def map = ["documentType":documentType,

	"documentSousType":documentSousType,

	"periodeFiscale":periodeFiscale,

	"montant":montant,

	"dateReception":dateReceptionDocument,

	"numeroContribuable":numeroTiers,

	"nomPrenoms":nomPrenoms,

	"numeroAVS13":numeroAVS13,

	"dateNaissance":dateNaissance,

	"numeroOid" : numeroOid,

	"support":support]</content>
                <expression expressionType="TYPE_VARIABLE" name="numeroOid" returnType="java.lang.Integer" id="7371808136091971586">
                  <content>numeroOid</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentSousType" returnType="java.lang.String" id="8060743795255291324">
                  <content>documentSousType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentType" returnType="java.lang.String" id="7016564083827301601">
                  <content>documentType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateReceptionDocument" returnType="java.util.Date" id="5547393836625086945">
                  <content>dateReceptionDocument</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="nomPrenoms" returnType="java.lang.String" id="7840628838062907437">
                  <content>nomPrenoms</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="support" returnType="java.lang.String" id="8440239375080864866">
                  <content>support</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="montant" returnType="java.lang.Double" id="8746937995363992282">
                  <content>montant</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateNaissance" returnType="java.lang.Integer" id="5435856457730581808">
                  <content>dateNaissance</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroTiers" returnType="java.lang.Integer" id="7262916365364273013">
                  <content>numeroTiers</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroAVS13" returnType="java.lang.Long" id="6520999695121051114">
                  <content>numeroAVS13</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="periodeFiscale" returnType="java.lang.Integer" id="6873131941930588383">
                  <content>periodeFiscale</content>
                </expression>
              </expression>
            </input>
          </inputs>
          <outputs/>
        </connector>
        <dataDefinitions/>
        <operations/>
        <boundaryEvents/>
      </automaticTask>
      <userTask actorName="Taxateur DI" description="Traitement DI" expectedDuration="3600000" id="-8331691340677704184" name="Traitement DI" priority="NORMAL">
        <displayDescription expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="description" returnType="java.lang.String" id="7910618063876197079">
          <content>numeroTiers+"/"+periodeFiscale+"/"+montant+"/"+nomPrenoms</content>
          <expression expressionType="TYPE_VARIABLE" name="nomPrenoms" returnType="java.lang.String" id="4709651697280776885">
            <content>nomPrenoms</content>
          </expression>
          <expression expressionType="TYPE_VARIABLE" name="montant" returnType="java.lang.Double" id="4723150466173318188">
            <content>montant</content>
          </expression>
          <expression expressionType="TYPE_VARIABLE" name="numeroTiers" returnType="java.lang.Integer" id="6608914599847425836">
            <content>numeroTiers</content>
          </expression>
          <expression expressionType="TYPE_VARIABLE" name="periodeFiscale" returnType="java.lang.Integer" id="5089134459301191714">
            <content>periodeFiscale</content>
          </expression>
        </displayDescription>
        <incomingTransition idref="1391443008402771653"/>
        <outgoingTransition idref="2618113229880968111"/>
        <connector activationEvent="ON_ENTER" connectorId="scripting-groovy" failAction="FAIL" name="setBusinessId" version="1.0.0">
          <inputs>
            <input name="script">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="setActivityId" returnType="java.lang.Object" id="8681879216666645658">
                <content>traitementDiTaskBusinessId != null ? traitementDiTaskBusinessId : activityInstanceId</content>
                <expression expressionType="TYPE_ENGINE_CONSTANT" interpreter="" name="activityInstanceId" returnType="java.lang.Long" id="8736642260169281930">
                  <content>activityInstanceId</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="traitementDiTaskBusinessId" returnType="java.lang.Long" id="7372502511792571522">
                  <content>traitementDiTaskBusinessId</content>
                </expression>
              </expression>
            </input>
          </inputs>
          <outputs>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="taskBusinessId" type="DATA"/>
              <rightOperand expressionType="TYPE_INPUT" interpreter="" name="result" returnType="java.lang.Object" id="5277757858107217116">
                <content>result</content>
              </rightOperand>
            </operation>
          </outputs>
        </connector>
        <connector activationEvent="ON_ENTER" connectorId="scripting-groovy" failAction="FAIL" name="setAssigneeIfAvailable" version="1.0.0">
          <inputs>
            <input name="script">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="setAssignee" returnType="java.lang.Object" id="8307994755779256971">
                <content>import java.util.logging.Logger;

if(utilisateurTraitementMetierId) {
	try {
		apiAccessor.getProcessAPI().assignUserTask(activityInstanceId, utilisateurTraitementMetierId)
	} catch (org.bonitasoft.engine.identity.UserNotFoundException ex) {
		Logger.getAnonymousLogger().info("user "+utilisateurTraitementMetierId+" not found.")
	}
}</content>
                <expression expressionType="TYPE_ENGINE_CONSTANT" interpreter="" name="apiAccessor" returnType="com.bonitasoft.engine.api.APIAccessor" id="6421627856195431632">
                  <content>apiAccessor</content>
                </expression>
                <expression expressionType="TYPE_ENGINE_CONSTANT" interpreter="" name="activityInstanceId" returnType="java.lang.Long" id="4632733386103668453">
                  <content>activityInstanceId</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="utilisateurTraitementMetierId" returnType="java.lang.Long" id="5730961851524626950">
                  <content>utilisateurTraitementMetierId</content>
                </expression>
              </expression>
            </input>
          </inputs>
          <outputs/>
        </connector>
        <connector activationEvent="ON_ENTER" connectorId="EvtTacheDperm" failAction="FAIL" name="creationTache" version="1.2.0">
          <inputs>
            <input name="jmsConnectionFactory">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="java:comp/env/activemq" returnType="java.lang.String" id="4815285779113854892">
                <content>java:comp/env/activemq</content>
              </expression>
            </input>
            <input name="idRepelec">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantRepertoireElectronique" returnType="java.lang.String" id="7261748320723167288">
                <content>identifiantRepertoireElectronique</content>
              </expression>
            </input>
            <input name="esbApplication">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomApplication" returnType="java.lang.String" id="5731940127263217891">
                <content>esbNomApplication</content>
              </expression>
            </input>
            <input name="montant">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="montant" returnType="java.lang.Double" id="7035428293489000178">
                <content>montant</content>
              </expression>
            </input>
            <input name="numeroTiers">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="numeroTiers" returnType="java.lang.Integer" id="8141164435733141514">
                <content>numeroTiers</content>
              </expression>
            </input>
            <input name="identifiantSupervision">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantSupervision" returnType="java.lang.String" id="6515182409230152328">
                <content>identifiantSupervision</content>
              </expression>
            </input>
            <input name="actionTache">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="CREATION" returnType="java.lang.String" id="7705012423906422779">
                <content>CREATION</content>
              </expression>
            </input>
            <input name="esbDomaine">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomDomaine" returnType="java.lang.String" id="6842399052669452525">
                <content>esbNomDomaine</content>
              </expression>
            </input>
            <input name="sousTypeDocument">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="documentSousType" returnType="java.lang.String" id="6734351748395860125">
                <content>documentSousType</content>
              </expression>
            </input>
            <input name="periodeFiscale">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="periodeFiscale" returnType="java.lang.Integer" id="8906581732370603442">
                <content>periodeFiscale</content>
              </expression>
            </input>
            <input name="numeroOid">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="numeroOid" returnType="java.lang.Integer" id="4764685308041660460">
                <content>numeroOid</content>
              </expression>
            </input>
            <input name="typeTache">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="typeTache" returnType="java.lang.String" id="5787921529494805354">
                <content>typeTache</content>
              </expression>
            </input>
            <input name="codeApplication">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="BPMS" returnType="java.lang.String" id="6870915166206354273">
                <content>BPMS</content>
              </expression>
            </input>
            <input name="numeroAvs13">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="numeroAVS13" returnType="java.lang.Long" id="5782644699134049651">
                <content>numeroAVS13</content>
              </expression>
            </input>
            <input name="identifiantTache">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="taskBusinessId" returnType="java.lang.Long" id="8544981863001694987">
                <content>taskBusinessId</content>
              </expression>
            </input>
            <input name="esbDestinationHistorique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="integrerKpiDossierPermanent" returnType="java.lang.String" id="7996615150880261305">
                <content>integrerKpiDossierPermanent</content>
              </expression>
            </input>
            <input name="typeDocument">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="documentType" returnType="java.lang.String" id="7248251316175017992">
                <content>documentType</content>
              </expression>
            </input>
            <input name="nomPrenom">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="nomPrenoms" returnType="java.lang.String" id="5859225309979118303">
                <content>nomPrenoms</content>
              </expression>
            </input>
            <input name="visaUtilisateurSource">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="visaUtilisateurSource" returnType="java.lang.String" id="8813143744651183975">
                <content>visaUtilisateurSource</content>
              </expression>
            </input>
            <input name="horodatageReception">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="dateReceptionMs" returnType="java.lang.Long" id="8463469810376780429">
                <content>dateReceptionDocument != null ? dateReceptionDocument.getTime() : null</content>
                <expression expressionType="TYPE_VARIABLE" name="dateReceptionDocument" returnType="java.util.Date" id="7648237862154584990">
                  <content>dateReceptionDocument</content>
                </expression>
              </expression>
            </input>
            <input name="note">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="noteContenu" returnType="java.lang.String" id="7941248211468172315">
                <content>noteContenu</content>
              </expression>
            </input>
          </inputs>
          <outputs/>
        </connector>
        <connector activationEvent="ON_ENTER" connectorId="EvtTacheDperm" failAction="FAIL" name="HistoAttributionDI" version="1.2.0">
          <inputs>
            <input name="jmsConnectionFactory">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="java:comp/env/activemq" returnType="java.lang.String" id="8019557038085819819">
                <content>java:comp/env/activemq</content>
              </expression>
            </input>
            <input name="idRepelec">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantRepertoireElectronique" returnType="java.lang.String" id="5144876434693980579">
                <content>identifiantRepertoireElectronique</content>
              </expression>
            </input>
            <input name="esbApplication">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomApplication" returnType="java.lang.String" id="5436236821167072695">
                <content>esbNomApplication</content>
              </expression>
            </input>
            <input name="montant">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="montant" returnType="java.lang.Double" id="7635392803301881568">
                <content>montant</content>
              </expression>
            </input>
            <input name="identifiantSupervision">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantSupervision" returnType="java.lang.String" id="5652791923479397587">
                <content>identifiantSupervision</content>
              </expression>
            </input>
            <input name="numeroTiers">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="numeroTiers" returnType="java.lang.Integer" id="8624362263565516237">
                <content>numeroTiers</content>
              </expression>
            </input>
            <input name="visaUtilisateurCible">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="visaUtilisateurTache" returnType="java.lang.String" id="6388867759829042833">
                <content>visaUtilisateurTache</content>
              </expression>
            </input>
            <input name="actionTache">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="ATTRIBUTION" returnType="java.lang.String" id="5952789194660822699">
                <content>ATTRIBUTION</content>
              </expression>
            </input>
            <input name="esbDomaine">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomDomaine" returnType="java.lang.String" id="5487681046024968964">
                <content>esbNomDomaine</content>
              </expression>
            </input>
            <input name="sousTypeDocument">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="documentSousType" returnType="java.lang.String" id="4921082271038408735">
                <content>documentSousType</content>
              </expression>
            </input>
            <input name="periodeFiscale">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="periodeFiscale" returnType="java.lang.Integer" id="4821333897424227524">
                <content>periodeFiscale</content>
              </expression>
            </input>
            <input name="numeroOid">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="numeroOid" returnType="java.lang.Integer" id="5084282211307586634">
                <content>numeroOid</content>
              </expression>
            </input>
            <input name="typeTache">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="typeTacheTraitementMetier" returnType="java.lang.String" id="6997312391267994741">
                <content>typeTacheTraitementMetier</content>
              </expression>
            </input>
            <input name="codeApplication">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="BPMS" returnType="java.lang.String" id="9159181279266954651">
                <content>BPMS</content>
              </expression>
            </input>
            <input name="numeroAvs13">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="numeroAVS13" returnType="java.lang.Long" id="5559690775092314617">
                <content>numeroAVS13</content>
              </expression>
            </input>
            <input name="identifiantTache">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="taskBusinessId" returnType="java.lang.Long" id="5296495586484946687">
                <content>taskBusinessId</content>
              </expression>
            </input>
            <input name="esbDestinationHistorique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="integrerKpiDossierPermanent" returnType="java.lang.String" id="5658490146735625081">
                <content>integrerKpiDossierPermanent</content>
              </expression>
            </input>
            <input name="typeDocument">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="documentType" returnType="java.lang.String" id="6223799033648607605">
                <content>documentType</content>
              </expression>
            </input>
            <input name="nomPrenom">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="nomPrenoms" returnType="java.lang.String" id="8381779679309508600">
                <content>nomPrenoms</content>
              </expression>
            </input>
            <input name="visaUtilisateurSource">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="visaUtilisateurSource" returnType="java.lang.String" id="4803067617823607016">
                <content>visaUtilisateurSource</content>
              </expression>
            </input>
            <input name="horodatageReception">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="dateMs" returnType="java.lang.Long" id="6516419327424852033">
                <content>dateReceptionDocument != null ? dateReceptionDocument.getTime() : null</content>
                <expression expressionType="TYPE_VARIABLE" name="dateReceptionDocument" returnType="java.util.Date" id="7702761643450167200">
                  <content>dateReceptionDocument</content>
                </expression>
              </expression>
            </input>
            <input name="codePotCible">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="groupeCandidatTraitement" returnType="java.lang.String" id="8715756823440441680">
                <content>groupeCandidatTraitement</content>
              </expression>
            </input>
            <input name="note">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="noteContenu" returnType="java.lang.String" id="4899864930030370210">
                <content>noteContenu</content>
              </expression>
            </input>
          </inputs>
          <outputs/>
        </connector>
        <connector activationEvent="ON_FINISH" connectorId="HumanTaskRemoveIndex" failAction="FAIL" name="unindex" version="1.0.0">
          <inputs/>
          <outputs/>
        </connector>
        <connector activationEvent="ON_ENTER" connectorId="humanTaskAddToIndex" failAction="FAIL" name="index" version="1.1.0">
          <inputs>
            <input name="taskDataNames">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="dateReception,groupeCandidat,hasNote,poidsTache,taskAssigned,taskRead,typeTache,nomPrenomsFiltered,noteContenu,etapeManuelle" returnType="java.lang.String" id="7449028679692968490">
                <content>dateReception,groupeCandidat,hasNote,poidsTache,taskAssigned,taskRead,typeTache,nomPrenomsFiltered,noteContenu,etapeManuelle</content>
              </expression>
            </input>
            <input name="processDataNames">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="dateNaissance,identifiantRepertoireElectronique,identifiantSupervision,montant,nomPrenoms,npa,numeroTiers,pays,periodeFiscale,documentSousType,documentType,numeroAVS13,numeroOid" returnType="java.lang.String" id="5944106938622021833">
                <content>dateNaissance,identifiantRepertoireElectronique,identifiantSupervision,montant,nomPrenoms,npa,numeroTiers,pays,periodeFiscale,documentSousType,documentType,numeroAVS13,numeroOid</content>
              </expression>
            </input>
          </inputs>
          <outputs/>
        </connector>
        <connector activationEvent="ON_FINISH" connectorId="EvtTacheDperm" failAction="FAIL" name="HistoClotureManuelle" version="1.2.0">
          <inputs>
            <input name="jmsConnectionFactory">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="java:comp/env/activemq" returnType="java.lang.String" id="6749014461174858849">
                <content>java:comp/env/activemq</content>
              </expression>
            </input>
            <input name="idRepelec">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantRepertoireElectronique" returnType="java.lang.String" id="6008356786023970510">
                <content>identifiantRepertoireElectronique</content>
              </expression>
            </input>
            <input name="esbApplication">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomApplication" returnType="java.lang.String" id="9151510769519915522">
                <content>esbNomApplication</content>
              </expression>
            </input>
            <input name="montant">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="montant" returnType="java.lang.Double" id="8440193153524378916">
                <content>montant</content>
              </expression>
            </input>
            <input name="numeroTiers">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="numeroTiers" returnType="java.lang.Integer" id="6312327637383816440">
                <content>numeroTiers</content>
              </expression>
            </input>
            <input name="identifiantSupervision">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantSupervision" returnType="java.lang.String" id="5259558258965051834">
                <content>identifiantSupervision</content>
              </expression>
            </input>
            <input name="visaUtilisateurCible">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="visaUtilisateurTache" returnType="java.lang.String" id="5619094118801855707">
                <content>visaUtilisateurTache</content>
              </expression>
            </input>
            <input name="actionTache">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="CLOTURE" returnType="java.lang.String" id="6713562115837615026">
                <content>if(codeSortie=="Traiter") return "TRAITEMENT"

else return "CLOTURE"</content>
                <expression expressionType="TYPE_VARIABLE" name="codeSortie" returnType="java.lang.String" id="5129113317314808282">
                  <content>codeSortie</content>
                </expression>
              </expression>
            </input>
            <input name="esbDomaine">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomDomaine" returnType="java.lang.String" id="6175247003269210673">
                <content>esbNomDomaine</content>
              </expression>
            </input>
            <input name="sousTypeDocument">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="documentSousType" returnType="java.lang.String" id="8139029186125810517">
                <content>documentSousType</content>
              </expression>
            </input>
            <input name="periodeFiscale">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="periodeFiscale" returnType="java.lang.Integer" id="5012777836127252430">
                <content>periodeFiscale</content>
              </expression>
            </input>
            <input name="numeroOid">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="numeroOid" returnType="java.lang.Integer" id="4982835183912248539">
                <content>numeroOid</content>
              </expression>
            </input>
            <input name="typeTache">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="typeTacheTraitementMetier" returnType="java.lang.String" id="8050091654332933087">
                <content>typeTacheTraitementMetier</content>
              </expression>
            </input>
            <input name="codeApplication">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="BPMS" returnType="java.lang.String" id="7199327116635174415">
                <content>BPMS</content>
              </expression>
            </input>
            <input name="numeroAvs13">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="numeroAVS13" returnType="java.lang.Long" id="8800005226208253866">
                <content>numeroAVS13</content>
              </expression>
            </input>
            <input name="identifiantTache">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="taskBusinessId" returnType="java.lang.Long" id="6566129621733089545">
                <content>taskBusinessId</content>
              </expression>
            </input>
            <input name="esbDestinationHistorique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="integrerKpiDossierPermanent" returnType="java.lang.String" id="8889227055541837888">
                <content>integrerKpiDossierPermanent</content>
              </expression>
            </input>
            <input name="typeDocument">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="documentType" returnType="java.lang.String" id="9128808259699967447">
                <content>documentType</content>
              </expression>
            </input>
            <input name="nomPrenom">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="nomPrenoms" returnType="java.lang.String" id="9130162169209482296">
                <content>nomPrenoms</content>
              </expression>
            </input>
            <input name="visaUtilisateurSource">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="visaUtilisateurTache" returnType="java.lang.String" id="5186673938140617498">
                <content>visaUtilisateurTache</content>
              </expression>
            </input>
            <input name="horodatageReception">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="dateReceptionMs" returnType="java.lang.Long" id="8325741810260311735">
                <content>dateReceptionDocument != null ? dateReceptionDocument.getTime() : null</content>
                <expression expressionType="TYPE_VARIABLE" name="dateReceptionDocument" returnType="java.util.Date" id="7737638620262465748">
                  <content>dateReceptionDocument</content>
                </expression>
              </expression>
            </input>
            <input name="note">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="noteContenu" returnType="java.lang.String" id="6503326004103231441">
                <content>noteContenu</content>
              </expression>
            </input>
          </inputs>
          <outputs/>
        </connector>
        <dataDefinitions>
          <dataDefinition className="java.lang.Boolean" name="taskRead" transient="false">
            <defaultValue expressionType="TYPE_CONSTANT" interpreter="" name="false" returnType="java.lang.Boolean" id="9063324546947881506">
              <content>false</content>
            </defaultValue>
          </dataDefinition>
          <textDataDefinition className="java.lang.String" longText="true" name="typeTache" transient="false">
            <defaultValue expressionType="TYPE_VARIABLE" interpreter="" name="typeTacheTraitementMetier" returnType="java.lang.String" id="4708001640291667744">
              <content>typeTacheTraitementMetier</content>
            </defaultValue>
          </textDataDefinition>
          <textDataDefinition className="java.lang.String" longText="true" name="groupeCandidat" transient="false">
            <defaultValue expressionType="TYPE_VARIABLE" interpreter="" name="groupeCandidatTraitement" returnType="java.lang.String" id="5076418052688852669">
              <content>groupeCandidatTraitement</content>
            </defaultValue>
          </textDataDefinition>
          <textDataDefinition className="java.lang.String" longText="true" name="codeSortieTache" transient="false"/>
          <textDataDefinition className="java.lang.String" longText="true" name="motif" transient="false"/>
          <textDataDefinition className="java.lang.String" longText="true" name="noteContenu" transient="false">
            <defaultValue expressionType="TYPE_VARIABLE" interpreter="" name="note" returnType="java.lang.String" id="5778385560431422628">
              <content>note</content>
            </defaultValue>
          </textDataDefinition>
          <dataDefinition className="java.lang.Boolean" name="hasNote" transient="false">
            <defaultValue expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="noteNull" returnType="java.lang.Boolean" id="7201205058469785270">
              <content>note as boolean</content>
              <expression expressionType="TYPE_VARIABLE" name="note" returnType="java.lang.String" id="7659655160193457682">
                <content>note</content>
              </expression>
            </defaultValue>
          </dataDefinition>
          <dataDefinition className="java.lang.Float" name="poidsTache" transient="false">
            <defaultValue expressionType="TYPE_VARIABLE" interpreter="" name="poidsTacheTraitementMetier" returnType="java.lang.Float" id="7750843695240642678">
              <content>poidsTacheTraitementMetier</content>
            </defaultValue>
          </dataDefinition>
          <textDataDefinition className="java.lang.String" longText="true" name="nomPrenomsFiltered" transient="false">
            <defaultValue expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="accentHelper" returnType="java.lang.String" id="6355278570200070859">
              <content>import ch.vd.bpm.dperm.util.RemoveAccentHelper
return RemoveAccentHelper.removeAccents(nomPrenoms)</content>
              <expression expressionType="TYPE_VARIABLE" name="nomPrenoms" returnType="java.lang.String" id="7277654251200078419">
                <content>nomPrenoms</content>
              </expression>
            </defaultValue>
          </textDataDefinition>
          <dataDefinition className="java.lang.Boolean" name="taskAttributedByQuota" transient="false">
            <defaultValue expressionType="TYPE_CONSTANT" interpreter="" name="false" returnType="java.lang.Boolean" id="4667603589327362660">
              <content>false</content>
            </defaultValue>
          </dataDefinition>
          <dataDefinition className="java.util.Date" name="dateReception" transient="false">
            <defaultValue expressionType="TYPE_VARIABLE" interpreter="" name="dateReceptionDocument" returnType="java.util.Date" id="6823615084424657244">
              <content>dateReceptionDocument</content>
            </defaultValue>
          </dataDefinition>
          <dataDefinition className="java.lang.Long" name="taskBusinessId" transient="false"/>
          <textDataDefinition className="java.lang.String" longText="true" name="etapeManuelle" transient="false">
            <defaultValue expressionType="TYPE_CONSTANT" interpreter="" name="TRAITEMENT_METIER" returnType="java.lang.String" id="5857701390746944801">
              <content>TRAITEMENT_METIER</content>
            </defaultValue>
          </textDataDefinition>
        </dataDefinitions>
        <operations>
          <operation operatorType="ASSIGNMENT">
            <leftOperand name="codeSortie" type="DATA"/>
            <rightOperand expressionType="TYPE_VARIABLE" interpreter="" name="codeSortieTache" returnType="java.lang.String" id="5633401500511247890">
              <content>codeSortieTache</content>
            </rightOperand>
          </operation>
          <operation operatorType="ASSIGNMENT">
            <leftOperand name="motifSortie" type="DATA"/>
            <rightOperand expressionType="TYPE_VARIABLE" interpreter="" name="motif" returnType="java.lang.String" id="8186752528848968536">
              <content>motif</content>
            </rightOperand>
          </operation>
          <operation operatorType="ASSIGNMENT">
            <leftOperand name="utilisateurTraitementMetierId" type="DATA"/>
            <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="taskAssigneeId" returnType="java.lang.Long" id="4750846763544433787">
              <content>taskAssigneeId</content>
              <expression expressionType="TYPE_ENGINE_CONSTANT" interpreter="" name="taskAssigneeId" returnType="java.lang.Long" id="5541698402928657793">
                <content>taskAssigneeId</content>
              </expression>
            </rightOperand>
          </operation>
          <operation operatorType="ASSIGNMENT">
            <leftOperand name="typeTacheTraitementMetier" type="DATA"/>
            <rightOperand expressionType="TYPE_VARIABLE" interpreter="" name="typeTache" returnType="java.lang.String" id="4750740244878152003">
              <content>typeTache</content>
            </rightOperand>
          </operation>
          <operation operatorType="ASSIGNMENT">
            <leftOperand name="groupeCandidatTraitement" type="DATA"/>
            <rightOperand expressionType="TYPE_VARIABLE" interpreter="" name="groupeCandidat" returnType="java.lang.String" id="6429105242343113016">
              <content>groupeCandidat</content>
            </rightOperand>
          </operation>
          <operation operatorType="ASSIGNMENT">
            <leftOperand name="visaUtilisateurTache" type="DATA"/>
            <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="visaUtilisateurTache" returnType="java.lang.String" id="8721986829125114983">
              <content>return taskAssigneeId&gt;0 ? apiAccessor.getIdentityAPI().getUser(taskAssigneeId).getUserName() : null</content>
              <expression expressionType="TYPE_ENGINE_CONSTANT" interpreter="" name="taskAssigneeId" returnType="java.lang.Long" id="8345033304013454397">
                <content>taskAssigneeId</content>
              </expression>
              <expression expressionType="TYPE_ENGINE_CONSTANT" interpreter="" name="apiAccessor" returnType="com.bonitasoft.engine.api.APIAccessor" id="5442694490971998543">
                <content>apiAccessor</content>
              </expression>
            </rightOperand>
          </operation>
          <operation operatorType="ASSIGNMENT">
            <leftOperand name="note" type="DATA"/>
            <rightOperand expressionType="TYPE_VARIABLE" interpreter="" name="noteContenu" returnType="java.lang.String" id="8540800559855202364">
              <content>noteContenu</content>
            </rightOperand>
          </operation>
        </operations>
        <boundaryEvents/>
      </userTask>
      <automaticTask id="-7846411466357676893" name="Histo cloturée semiAuto">
        <incomingTransition idref="5198436680118156887"/>
        <outgoingTransition idref="170971691103468458"/>
        <connector activationEvent="ON_FINISH" connectorId="HistoriqueDperm" failAction="FAIL" name="clotureTaxationSemiAuto" version="1.5.0">
          <inputs>
            <input name="jmsConnectionFactory">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="java:comp/env/activemq" returnType="java.lang.String" id="5730350037517857819">
                <content>java:comp/env/activemq</content>
              </expression>
            </input>
            <input name="historique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="6317780133363339284">
                <content>true</content>
              </expression>
            </input>
            <input name="codeApplication">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="BPMS" returnType="java.lang.String" id="6037453989341265744">
                <content>BPMS</content>
              </expression>
            </input>
            <input name="codeOperation">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="TRAITEMENT_MET_DOCUMENT_TAXE" returnType="java.lang.String" id="8810829742441636314">
                <content>TRAITEMENT_MET_DOCUMENT_TAXE</content>
              </expression>
            </input>
            <input name="esbApplication">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomApplication" returnType="java.lang.String" id="5377495267899455451">
                <content>esbNomApplication</content>
              </expression>
            </input>
            <input name="identifiantRepelec">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantRepertoireElectronique" returnType="java.lang.String" id="4908326849639599819">
                <content>identifiantRepertoireElectronique</content>
              </expression>
            </input>
            <input name="visaUtilisateur">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="visaUtilisateurSource" returnType="java.lang.String" id="6202769634810766772">
                <content>visaUtilisateurSource</content>
              </expression>
            </input>
            <input name="esbDestinationHistorique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="integrerKpiDossierPermanent" returnType="java.lang.String" id="8647934286007037872">
                <content>integrerKpiDossierPermanent</content>
              </expression>
            </input>
            <input name="identifiantSupervision">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantSupervision" returnType="java.lang.String" id="8060288619082052940">
                <content>identifiantSupervision</content>
              </expression>
            </input>
            <input name="esbDomaine">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomDomaine" returnType="java.lang.String" id="8245417231341835084">
                <content>esbNomDomaine</content>
              </expression>
            </input>
            <input name="evtProcessus">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="5102140688357800509">
                <content>true</content>
              </expression>
            </input>
            <input name="caracteristiques">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="map" returnType="java.util.Map" id="4632344633082910747">
                <content>def map = ["documentType":documentType,

	"documentSousType":documentSousType,

	"periodeFiscale":periodeFiscale,

	"montant":montant,

	"dateReception":dateReceptionDocument,

	"numeroTiersIdentifie":numeroTiers,

	"nomPrenoms":nomPrenoms,

	"numeroAVS13":numeroAVS13,

	"dateNaissance":dateNaissance,

	"numeroOid" : numeroOid,

	"support":support]</content>
                <expression expressionType="TYPE_VARIABLE" name="numeroOid" returnType="java.lang.Integer" id="6802148962215093356">
                  <content>numeroOid</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentSousType" returnType="java.lang.String" id="6902672659345344772">
                  <content>documentSousType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentType" returnType="java.lang.String" id="7150743692870946651">
                  <content>documentType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateReceptionDocument" returnType="java.util.Date" id="5725788341619034990">
                  <content>dateReceptionDocument</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="nomPrenoms" returnType="java.lang.String" id="7660839522359305152">
                  <content>nomPrenoms</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="support" returnType="java.lang.String" id="5312773663639780847">
                  <content>support</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="montant" returnType="java.lang.Double" id="4623598527190100299">
                  <content>montant</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateNaissance" returnType="java.lang.Integer" id="7180771849710885172">
                  <content>dateNaissance</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroTiers" returnType="java.lang.Integer" id="7288062870487733777">
                  <content>numeroTiers</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroAVS13" returnType="java.lang.Long" id="9023845085475085797">
                  <content>numeroAVS13</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="periodeFiscale" returnType="java.lang.Integer" id="6369093398712654741">
                  <content>periodeFiscale</content>
                </expression>
              </expression>
            </input>
          </inputs>
          <outputs/>
        </connector>
        <dataDefinitions/>
        <operations/>
        <boundaryEvents/>
      </automaticTask>
      <automaticTask id="-8579984294774500902" name="Histo cloture auto">
        <incomingTransition idref="4556476553679255878"/>
        <outgoingTransition idref="3129635953385098273"/>
        <connector activationEvent="ON_ENTER" connectorId="scripting-groovy" failAction="FAIL" name="taskBusineesID" version="1.0.0">
          <inputs>
            <input name="script">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="taskBusinessId" returnType="java.lang.Object" id="6252578619296433032">
                <content>traitementDiTaskBusinessId != null ? traitementDiTaskBusinessId : activityInstanceId</content>
                <expression expressionType="TYPE_ENGINE_CONSTANT" interpreter="" name="activityInstanceId" returnType="java.lang.Long" id="8544005512279128089">
                  <content>activityInstanceId</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="traitementDiTaskBusinessId" returnType="java.lang.Long" id="4797218229870861297">
                  <content>traitementDiTaskBusinessId</content>
                </expression>
              </expression>
            </input>
          </inputs>
          <outputs>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="taskBusinessId" type="DATA"/>
              <rightOperand expressionType="TYPE_INPUT" interpreter="" name="result" returnType="java.lang.Object" id="5165807613825541441">
                <content>result</content>
              </rightOperand>
            </operation>
          </outputs>
        </connector>
        <connector activationEvent="ON_FINISH" connectorId="HistoriqueDperm" failAction="FAIL" name="clotureTaxationAuto" version="1.5.0">
          <inputs>
            <input name="jmsConnectionFactory">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="java:comp/env/activemq" returnType="java.lang.String" id="8424624750834104873">
                <content>java:comp/env/activemq</content>
              </expression>
            </input>
            <input name="historique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="9095604282649855934">
                <content>true</content>
              </expression>
            </input>
            <input name="codeApplication">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="BPMS" returnType="java.lang.String" id="7686316886183621677">
                <content>BPMS</content>
              </expression>
            </input>
            <input name="codeOperation">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="TRAITEMENT_MET_DOCUMENT_TAXE" returnType="java.lang.String" id="6747605785384841517">
                <content>TRAITEMENT_MET_DOCUMENT_TAXE</content>
              </expression>
            </input>
            <input name="esbApplication">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomApplication" returnType="java.lang.String" id="5491258693863999663">
                <content>esbNomApplication</content>
              </expression>
            </input>
            <input name="identifiantRepelec">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantRepertoireElectronique" returnType="java.lang.String" id="6037861389065261412">
                <content>identifiantRepertoireElectronique</content>
              </expression>
            </input>
            <input name="visaUtilisateur">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="visaUtilisateurSource" returnType="java.lang.String" id="8772389883844859004">
                <content>visaUtilisateurSource</content>
              </expression>
            </input>
            <input name="esbDestinationHistorique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="integrerKpiDossierPermanent" returnType="java.lang.String" id="5564891146076503690">
                <content>integrerKpiDossierPermanent</content>
              </expression>
            </input>
            <input name="identifiantSupervision">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantSupervision" returnType="java.lang.String" id="8840606001325467523">
                <content>identifiantSupervision</content>
              </expression>
            </input>
            <input name="esbDomaine">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomDomaine" returnType="java.lang.String" id="6365412334586467648">
                <content>esbNomDomaine</content>
              </expression>
            </input>
            <input name="evtProcessus">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="6870578852683893518">
                <content>true</content>
              </expression>
            </input>
            <input name="caracteristiques">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="map" returnType="java.util.Map" id="8411693233640951644">
                <content>def map = ["documentType":documentType,

	"documentSousType":documentSousType,

	"periodeFiscale":periodeFiscale,

	"montant":montant,

	"dateReception":dateReceptionDocument,

	"numeroTiersIdentifie":numeroTiers,

	"nomPrenoms":nomPrenoms,

	"numeroAVS13":numeroAVS13,

	"dateNaissance":dateNaissance,

	"numeroOid" : numeroOid,

	"support":support]</content>
                <expression expressionType="TYPE_VARIABLE" name="numeroOid" returnType="java.lang.Integer" id="9151477757078796703">
                  <content>numeroOid</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentSousType" returnType="java.lang.String" id="6777513506276752525">
                  <content>documentSousType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateReceptionDocument" returnType="java.util.Date" id="6644733558551455369">
                  <content>dateReceptionDocument</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="nomPrenoms" returnType="java.lang.String" id="8538314900688316625">
                  <content>nomPrenoms</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentType" returnType="java.lang.String" id="7980347600411357603">
                  <content>documentType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="support" returnType="java.lang.String" id="5124351862709778005">
                  <content>support</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="montant" returnType="java.lang.Double" id="8589519935680814279">
                  <content>montant</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateNaissance" returnType="java.lang.Integer" id="7353028478792908107">
                  <content>dateNaissance</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroTiers" returnType="java.lang.Integer" id="8381271301560998991">
                  <content>numeroTiers</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroAVS13" returnType="java.lang.Long" id="9100029812685303396">
                  <content>numeroAVS13</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="periodeFiscale" returnType="java.lang.Integer" id="5598611821472006385">
                  <content>periodeFiscale</content>
                </expression>
              </expression>
            </input>
          </inputs>
          <outputs/>
        </connector>
        <dataDefinitions>
          <dataDefinition className="java.lang.Long" name="taskBusinessId" transient="false"/>
        </dataDefinitions>
        <operations/>
        <boundaryEvents/>
      </automaticTask>
      <automaticTask id="-8571678104023152293" name="Traiter Evt Batch cloture">
        <incomingTransition idref="3788837784295851534"/>
        <outgoingTransition idref="1553663755118460954"/>
        <connector activationEvent="ON_ENTER" connectorId="scripting-groovy" failAction="FAIL" name="getResultDi" version="1.0.0">
          <inputs>
            <input name="script">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="getResultTaopp" returnType="java.lang.Object" id="8110543506615119350">
                <content>import javax.xml.bind.DatatypeConverter;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathFactory;

if(evtBatchType!="CLOTURE") {
	def xml = lastMessageContent.toURL().text
	
	def builder = DocumentBuilderFactory.newInstance().newDocumentBuilder()
	def doc     = builder.parse(lastMessageContent.toURL().openStream())
	XPath xPath =  XPathFactory.newInstance().newXPath();
	
	def traitementMetier = xPath.evaluate("/quittanceIntegrationMetierDi/traitementMetier/text()",doc)
	traitementMetier = traitementMetier != null ? DatatypeConverter.parseBoolean(traitementMetier) : null
	
	def controleIA = DatatypeConverter.parseBoolean(xPath.evaluate("/quittanceIntegrationMetierDi/controleIA/text()",doc))
	def assujettissement360 = DatatypeConverter.parseBoolean(xPath.evaluate("/quittanceIntegrationMetierDi/assujettissement/assujettissement360/text()",doc))
	def contribuableSourcierMixte = DatatypeConverter.parseBoolean(xPath.evaluate("/quittanceIntegrationMetierDi/assujettissement/contribuableSourcierMixte/text()",doc))
	def releveFiscalBancaire = DatatypeConverter.parseBoolean(xPath.evaluate("/quittanceIntegrationMetierDi/releveFiscalBancaire/text()",doc))
	
	return [
	//	'horodatage':DatatypeConverter.parseDateTime(xPath.evaluate("/quittanceIntegrationMetierDi/horodatage/text()",doc)).getTimeInMillis(),
		'traitementMetier':DatatypeConverter.parseBoolean(xPath.evaluate("/quittanceIntegrationMetierDi/traitementMetier/text()",doc)),
		'typeImpot':xPath.evaluate("/quittanceIntegrationMetierDi/typeImpot/text()",doc),
		'typeTaxation':xPath.evaluate("/quittanceIntegrationMetierDi/typeTaxation/text()",doc),
		'etatTaxation':xPath.evaluate("/quittanceIntegrationMetierDi/etatTaxation/text()",doc),
		'codeSegment':xPath.evaluate("/quittanceIntegrationMetierDi/codeSegment/text()",doc),
		
		'visaDossierReserve':xPath.evaluate("/quittanceIntegrationMetierDi/visaDossierReserve/text()",doc),
		'visaPreferentiel':xPath.evaluate("/quittanceIntegrationMetierDi/visaPreferentiel/text()",doc),
		'controleIA':controleIA,
		'doublonTypeTaxationPrecedente':xPath.evaluate("/quittanceIntegrationMetierDi/doublon/typeTaxationPrecedente/text()",doc),
		'assujettissement360':assujettissement360,
		'contribuableSourcierMixte':contribuableSourcierMixte,
		'releveFiscalBancaire':releveFiscalBancaire
	]
} else {
return [
		'traitementMetier':null,
		'typeImpot':null,
		'typeTaxation':null,
		'etatTaxation':null,
		// attention il faut bien garder le codeSegment pour executer la bonne sortie
		'codeSegment':codeSegment,
		'visaDossierReserve':null,
		'visaPreferentiel':null,
		'controleIA':null,
		'doublonTypeTaxationPrecedente':null,
		'assujettissement360':null,
		'contribuableSourcierMixte':null,
		'releveFiscalBancaire':null
	]
}</content>
                <expression expressionType="TYPE_VARIABLE" name="lastMessageContent" returnType="java.lang.String" id="5030613840944056926">
                  <content>lastMessageContent</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="evtBatchType" returnType="java.lang.String" id="8077299497940682719">
                  <content>evtBatchType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="codeSegment" returnType="java.lang.String" id="4843943720111711140">
                  <content>codeSegment</content>
                </expression>
              </expression>
            </input>
          </inputs>
          <outputs>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="codeSegment" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="result" returnType="java.lang.String" id="5876909979397861143">
                <content>result.codeSegment</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="7267833586241049247">
                  <content>result</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="codeSegment" returnType="java.lang.String" id="7122511850755463139">
                  <content>codeSegment</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="typeImpot" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="resulttypeImpot" returnType="java.lang.String" id="7872855718516430355">
                <content>result.typeImpot</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="8380429733750278389">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="visaDossierReserve" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="visaDossierReserve" returnType="java.lang.String" id="7607537566405127220">
                <content>result.visaDossierReserve</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="7347458762563753402">
                  <content>result</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="visaDossierReserve" returnType="java.lang.String" id="6975692597205504999">
                  <content>visaDossierReserve</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="visaPreferentiel" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="visaPreferentiel" returnType="java.lang.String" id="5203287336729092641">
                <content>result.visaPreferentiel</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="6229884032660723181">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="typeTaxation" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="getTypeTaxation" returnType="java.lang.String" id="5567746679245266999">
                <content>result.typeTaxation</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="7412271225555306907">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="etatTaxation" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="getEtatTaxation" returnType="java.lang.String" id="5914857795092867083">
                <content>result.etatTaxation</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="9045615971741250674">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="controleIA" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="getControleIA" returnType="java.lang.Boolean" id="7151831154849529189">
                <content>result.controleIA</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="5639191691784367570">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="releveFiscalBancaire" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="getReleveFiscalBancaire" returnType="java.lang.Boolean" id="7726171698967035385">
                <content>result.releveFiscalBancaire</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="6554281094451172975">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="traitementMetier" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="traitementMetier" returnType="java.lang.Boolean" id="6098398069293548143">
                <content>result.traitementMetier</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="5738721656327934207">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
          </outputs>
        </connector>
        <dataDefinitions/>
        <operations/>
        <boundaryEvents/>
      </automaticTask>
      <automaticTask id="-8596284356631925361" name="TRAITEMENT_MET_TRAITER_MANUELLE">
        <incomingTransition idref="6868548473501470257"/>
        <outgoingTransition idref="2588085312356109043"/>
        <connector activationEvent="ON_FINISH" connectorId="HistoriqueDperm" failAction="FAIL" name="Traiter" version="1.5.0">
          <inputs>
            <input name="historique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="8157897726081381309">
                <content>true</content>
              </expression>
            </input>
            <input name="jmsConnectionFactory">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="java:comp/env/activemq" returnType="java.lang.String" id="5662989362052315203">
                <content>java:comp/env/activemq</content>
              </expression>
            </input>
            <input name="codeOperation">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="TRAITEMENT_MET_TRAITER_MANUELLE" returnType="java.lang.String" id="7698871972255075559">
                <content>TRAITEMENT_MET_TRAITER_MANUELLE</content>
              </expression>
            </input>
            <input name="esbApplication">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomApplication" returnType="java.lang.String" id="5571737420882224910">
                <content>esbNomApplication</content>
              </expression>
            </input>
            <input name="identifiantRepelec">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantRepertoireElectronique" returnType="java.lang.String" id="6086227408796327618">
                <content>identifiantRepertoireElectronique</content>
              </expression>
            </input>
            <input name="identifiantSupervision">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantSupervision" returnType="java.lang.String" id="8216368692257194674">
                <content>identifiantSupervision</content>
              </expression>
            </input>
            <input name="motifAbandon">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="motifSortie" returnType="java.lang.String" id="7682359151511508248">
                <content>motifSortie</content>
              </expression>
            </input>
            <input name="esbDomaine">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomDomaine" returnType="java.lang.String" id="7754764543331750759">
                <content>esbNomDomaine</content>
              </expression>
            </input>
            <input name="evtProcessus">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="6652400836136250636">
                <content>true</content>
              </expression>
            </input>
            <input name="caracteristiques">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="map" returnType="java.util.Map" id="5413386383047007248">
                <content>def map = ["documentType":documentType,

	"documentSousType":documentSousType,

	"periodeFiscale":periodeFiscale,

	"montant":montant,

	"dateReception":dateReceptionDocument,

	"numeroTiersIdentifie":numeroTiers,

	"nomPrenoms":nomPrenoms,

	"numeroAVS13":numeroAVS13,

	"dateNaissance":dateNaissance,

	"numeroOid" : numeroOid,

	"support":support]</content>
                <expression expressionType="TYPE_VARIABLE" name="numeroOid" returnType="java.lang.Integer" id="8939858192202229762">
                  <content>numeroOid</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentSousType" returnType="java.lang.String" id="7261672348356352502">
                  <content>documentSousType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="nomPrenoms" returnType="java.lang.String" id="4758752202225235314">
                  <content>nomPrenoms</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentType" returnType="java.lang.String" id="8527705889009036895">
                  <content>documentType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateReceptionDocument" returnType="java.util.Date" id="5755895211953022873">
                  <content>dateReceptionDocument</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="support" returnType="java.lang.String" id="5102220413656713611">
                  <content>support</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateNaissance" returnType="java.lang.Integer" id="6791910488207455836">
                  <content>dateNaissance</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="montant" returnType="java.lang.Double" id="5221338465718669588">
                  <content>montant</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroTiers" returnType="java.lang.Integer" id="5085169173584927697">
                  <content>numeroTiers</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroAVS13" returnType="java.lang.Long" id="7762132884529059843">
                  <content>numeroAVS13</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="periodeFiscale" returnType="java.lang.Integer" id="8317474213611572850">
                  <content>periodeFiscale</content>
                </expression>
              </expression>
            </input>
            <input name="typeTache">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="typeTacheTraitementMetier" returnType="java.lang.String" id="5219706915117025378">
                <content>typeTacheTraitementMetier</content>
              </expression>
            </input>
            <input name="codeApplication">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="BPMS" returnType="java.lang.String" id="6715125900801489676">
                <content>BPMS</content>
              </expression>
            </input>
            <input name="visaUtilisateur">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="visaUtilisateurTache" returnType="java.lang.String" id="6775200009853574133">
                <content>visaUtilisateurTache</content>
              </expression>
            </input>
            <input name="esbDestinationHistorique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="integrerKpiDossierPermanent" returnType="java.lang.String" id="8829350057003085975">
                <content>integrerKpiDossierPermanent</content>
              </expression>
            </input>
          </inputs>
          <outputs/>
        </connector>
        <dataDefinitions/>
        <operations/>
        <boundaryEvents/>
      </automaticTask>
      <automaticTask id="-8298166880827586399" name="Indiquer Cloture TRAITEMENT_MET_DOCUMENT_TAXE">
        <incomingTransition idref="5364657009225714086"/>
        <outgoingTransition idref="338639496810381054"/>
        <connector activationEvent="ON_FINISH" connectorId="HistoriqueDperm" failAction="FAIL" name="clotureManuelle" version="1.5.0">
          <inputs>
            <input name="historique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="5570094680166867910">
                <content>true</content>
              </expression>
            </input>
            <input name="jmsConnectionFactory">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="java:comp/env/activemq" returnType="java.lang.String" id="9006689376623207432">
                <content>java:comp/env/activemq</content>
              </expression>
            </input>
            <input name="codeOperation">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="TRAITEMENT_MET_DOCUMENT_TAXE" returnType="java.lang.String" id="7585527192708187006">
                <content>TRAITEMENT_MET_DOCUMENT_TAXE</content>
              </expression>
            </input>
            <input name="esbApplication">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomApplication" returnType="java.lang.String" id="7613599631370483099">
                <content>esbNomApplication</content>
              </expression>
            </input>
            <input name="identifiantRepelec">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantRepertoireElectronique" returnType="java.lang.String" id="7932116256087800087">
                <content>identifiantRepertoireElectronique</content>
              </expression>
            </input>
            <input name="identifiantSupervision">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="identifiantSupervision" returnType="java.lang.String" id="7993315608793615864">
                <content>identifiantSupervision</content>
              </expression>
            </input>
            <input name="evtProcessus">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="true" returnType="java.lang.Boolean" id="5211546268545036921">
                <content>true</content>
              </expression>
            </input>
            <input name="esbDomaine">
              <expression expressionType="TYPE_PARAMETER" interpreter="" name="esbNomDomaine" returnType="java.lang.String" id="7345606843649622640">
                <content>esbNomDomaine</content>
              </expression>
            </input>
            <input name="caracteristiques">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="map" returnType="java.util.Map" id="5810016396953199546">
                <content>def map = ["documentType":documentType,

	"documentSousType":documentSousType,

	"periodeFiscale":periodeFiscale,

	"montant":montant,

	"dateReception":dateReceptionDocument,

	"numeroTiersIdentifie":numeroTiers,

	"nomPrenoms":nomPrenoms,

	"numeroAVS13":numeroAVS13,

	"dateNaissance":dateNaissance,

	"numeroOid" : numeroOid,

	"support":support]</content>
                <expression expressionType="TYPE_VARIABLE" name="numeroOid" returnType="java.lang.Integer" id="6519936141886298412">
                  <content>numeroOid</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentSousType" returnType="java.lang.String" id="4977203812580824720">
                  <content>documentSousType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="support" returnType="java.lang.String" id="4835171956538662126">
                  <content>support</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateReceptionDocument" returnType="java.util.Date" id="8772975142504183141">
                  <content>dateReceptionDocument</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="nomPrenoms" returnType="java.lang.String" id="8109241522912897840">
                  <content>nomPrenoms</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="documentType" returnType="java.lang.String" id="7153075055206907091">
                  <content>documentType</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="montant" returnType="java.lang.Double" id="8606613076189837145">
                  <content>montant</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="dateNaissance" returnType="java.lang.Integer" id="6409302304807012314">
                  <content>dateNaissance</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroTiers" returnType="java.lang.Integer" id="5910329499681751329">
                  <content>numeroTiers</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="numeroAVS13" returnType="java.lang.Long" id="5931032489050782066">
                  <content>numeroAVS13</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="periodeFiscale" returnType="java.lang.Integer" id="8092089853955138462">
                  <content>periodeFiscale</content>
                </expression>
              </expression>
            </input>
            <input name="typeTache">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="typeTacheTraitementMetier" returnType="java.lang.String" id="5931185949821676643">
                <content>typeTacheTraitementMetier</content>
              </expression>
            </input>
            <input name="codeApplication">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="BPMS" returnType="java.lang.String" id="4858417856459026987">
                <content>BPMS</content>
              </expression>
            </input>
            <input name="visaUtilisateur">
              <expression expressionType="TYPE_VARIABLE" interpreter="" name="visaUtilisateurTache" returnType="java.lang.String" id="5094662137355110839">
                <content>visaUtilisateurTache</content>
              </expression>
            </input>
            <input name="esbDestinationHistorique">
              <expression expressionType="TYPE_CONSTANT" interpreter="" name="integrerKpiDossierPermanent" returnType="java.lang.String" id="5314972559166902512">
                <content>integrerKpiDossierPermanent</content>
              </expression>
            </input>
          </inputs>
          <outputs/>
        </connector>
        <dataDefinitions/>
        <operations/>
        <boundaryEvents/>
      </automaticTask>
      <receiveTask id="-6897610475471751179" name="RecevoirReponseIntegrerDI">
        <incomingTransition idref="2684925251474338585"/>
        <outgoingTransition idref="4092077990966441505"/>
        <connector activationEvent="ON_FINISH" connectorId="scripting-groovy" failAction="FAIL" name="getResultDi" version="1.0.0">
          <inputs>
            <input name="script">
              <expression expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="getResultTaopp" returnType="java.lang.Object" id="8911478543165070765">
                <content>import javax.xml.bind.DatatypeConverter;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathFactory;

//def xml = lastMessageContent.toURL().text

def builder = DocumentBuilderFactory.newInstance().newDocumentBuilder()
def doc     = builder.parse(lastMessageContent.toURL().openStream())
XPath xPath =  XPathFactory.newInstance().newXPath();
/**
def traitementMetier = xPath.evaluate("/quittanceIntegrationMetierDi/traitementMetier/text()",doc)
traitementMetier = traitementMetier != null ? DatatypeConverter.parseBoolean(traitementMetier) : null
def controleIA = DatatypeConverter.parseBoolean(xPath.evaluate("/quittanceIntegrationMetierDi/controleIA/text()",doc))
def assujettissement360 = DatatypeConverter.parseBoolean(xPath.evaluate("/quittanceIntegrationMetierDi/assujettissement/assujettissement360/text()",doc))
def contribuableSourcierMixte = DatatypeConverter.parseBoolean(xPath.evaluate("/quittanceIntegrationMetierDi/assujettissement/contribuableSourcierMixte/text()",doc))
def releveFiscalBancaire = DatatypeConverter.parseBoolean(xPath.evaluate("/quittanceIntegrationMetierDi/releveFiscalBancaire/text()",doc))
*/
def traitementMetier = xPath.evaluate("/quittanceIntegrationMetierDi/traitementMetier/text()",doc)
traitementMetier = traitementMetier ? DatatypeConverter.parseBoolean(traitementMetier) : null

def controleIA = xPath.evaluate("/quittanceIntegrationMetierDi/controleIA/text()",doc)
controleIA = controleIA  ? DatatypeConverter.parseBoolean(controleIA) : null

def assujettissement360 = xPath.evaluate("/quittanceIntegrationMetierDi/assujettissement/assujettissement360/text()",doc)
assujettissement360 = assujettissement360 ? DatatypeConverter.parseBoolean(assujettissement360) : null //

def contribuableSourcierMixte = xPath.evaluate("/quittanceIntegrationMetierDi/assujettissement/contribuableSourcierMixte/text()",doc)
contribuableSourcierMixte = contribuableSourcierMixte ? DatatypeConverter.parseBoolean(contribuableSourcierMixte) : null //

def releveFiscalBancaire = xPath.evaluate("/quittanceIntegrationMetierDi/releveFiscalBancaire/text()",doc)
releveFiscalBancaire = releveFiscalBancaire ? DatatypeConverter.parseBoolean(releveFiscalBancaire) : null //

return [
//	'horodatage':DatatypeConverter.parseDateTime(xPath.evaluate("/quittanceIntegrationMetierDi/horodatage/text()",doc)).getTimeInMillis(),
	'traitementMetier':traitementMetier,
	'typeImpot':xPath.evaluate("/quittanceIntegrationMetierDi/typeImpot/text()",doc),
	'typeTaxation':xPath.evaluate("/quittanceIntegrationMetierDi/typeTaxation/text()",doc),
	'etatTaxation':xPath.evaluate("/quittanceIntegrationMetierDi/etatTaxation/text()",doc),
	'codeSegment':xPath.evaluate("/quittanceIntegrationMetierDi/codeSegment/text()",doc),
	
	'visaDossierReserve':xPath.evaluate("/quittanceIntegrationMetierDi/visaDossierReserve/text()",doc),
	'visaPreferentiel':xPath.evaluate("/quittanceIntegrationMetierDi/visaPreferentiel/text()",doc),
	'controleIA':controleIA,
	'doublonTypeTaxationPrecedente':xPath.evaluate("/quittanceIntegrationMetierDi/doublon/typeTaxationPrecedente/text()",doc),
	'assujettissement360':assujettissement360,
	'contribuableSourcierMixte':contribuableSourcierMixte,
	'releveFiscalBancaire':releveFiscalBancaire
]</content>
                <expression expressionType="TYPE_VARIABLE" name="lastMessageContent" returnType="java.lang.String" id="6239782286501441281">
                  <content>lastMessageContent</content>
                </expression>
              </expression>
            </input>
          </inputs>
          <outputs>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="codeSegment" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="result" returnType="java.lang.String" id="5155527098326383489">
                <content>result.codeSegment</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="6940520998050080596">
                  <content>result</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="codeSegment" returnType="java.lang.String" id="6743933811339600368">
                  <content>codeSegment</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="typeImpot" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="resulttypeImpot" returnType="java.lang.String" id="8236286342471726289">
                <content>result.typeImpot</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="4954923856646338589">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="visaDossierReserve" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="visaDossierReserve" returnType="java.lang.String" id="6406503613690004784">
                <content>result.visaDossierReserve</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="6554264312938056826">
                  <content>result</content>
                </expression>
                <expression expressionType="TYPE_VARIABLE" name="visaDossierReserve" returnType="java.lang.String" id="5941341236777529135">
                  <content>visaDossierReserve</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="visaPreferentiel" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="visaPreferentiel" returnType="java.lang.String" id="6716276589635692620">
                <content>result.visaPreferentiel</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="5330843408541524572">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="typeTaxation" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="getTypeTaxation" returnType="java.lang.String" id="7130208194593272064">
                <content>result.typeTaxation</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="4872424544243654108">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="etatTaxation" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="getEtatTaxation" returnType="java.lang.String" id="8488225090359625556">
                <content>result.etatTaxation</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="9097285591483570437">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="controleIA" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="getControleIA" returnType="java.lang.Boolean" id="7139582533876414628">
                <content>result.controleIA</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="7097180666093340262">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="releveFiscalBancaire" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="getReleveFiscalBancaire" returnType="java.lang.Boolean" id="5997259883196936128">
                <content>result.releveFiscalBancaire</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="7805605008234023628">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="traitementMetier" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="traitementMetier" returnType="java.lang.Boolean" id="9157179299178202003">
                <content>result.traitementMetier</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="8376857480299983265">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="assujettissement360" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="assujettissement360" returnType="java.lang.Boolean" id="5764910420283691388">
                <content>result.assujettissement360</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="8152206775871711985">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="doublonTypeTaxation" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="doublonTypeTaxation" returnType="java.lang.String" id="6996353126103475963">
                <content>result.doublonTypeTaxationPrecedente</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="8113541152053068779">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
            <operation operatorType="ASSIGNMENT">
              <leftOperand name="contribuableSourcierMixte" type="DATA"/>
              <rightOperand expressionType="TYPE_READ_ONLY_SCRIPT" interpreter="GROOVY" name="contribuableSourcierMixte" returnType="java.lang.Boolean" id="6606930074595597393">
                <content>result.contribuableSourcierMixte</content>
                <expression expressionType="TYPE_INPUT" name="result" returnType="java.lang.Object" id="6995633027782704822">
                  <content>result</content>
                </expression>
              </rightOperand>
            </operation>
          </outputs>
        </connector>
        <dataDefinitions/>
        <operations/>
        <boundaryEvents/>
        <catchMessageEventTrigger name="ReponseIntegrerDI">
          <correlation>
            <key expressionType="TYPE_CONSTANT" interpreter="" name="correlationId" returnType="java.lang.String" id="6932156982321876533">
              <content>correlationId</content>
            </key>
            <value expressionType="TYPE_VARIABLE" interpreter="" name="messageCorrelationId" returnType="java.lang.String" id="7861709901786609465">
              <content>messageCorrelationId</content>
            </value>
          </correlation>
          <operation operatorType="ASSIGNMENT">
            <leftOperand name="lastMessageContent" type="DATA"/>
            <rightOperand expressionType="TYPE_VARIABLE" interpreter="" name="messageContentUrl" returnType="java.lang.String" id="5615051668771668519">
              <content>messageContentUrl</content>
            </rightOperand>
          </operation>
        </catchMessageEventTrigger>
      </receiveTask>
      <gateway gatewayType="EXCLUSIVE" id="-6978575636377187818" name="Traitement auto">
        <incomingTransition idref="734739271986791573"/>
        <incomingTransition idref="256124419488239139"/>
        <outgoingTransition idref="4745710561266191839"/>
      </gateway>
      <gateway gatewayType="EXCLUSIVE" id="-5275259712155765340" name="Traitement manuel">
        <incomingTransition idref="369489302300739051"/>
        <incomingTransition idref="346522929945294218"/>
        <outgoingTransition idref="6718796719052403711"/>
      </gateway>
      <gateway gatewayType="EXCLUSIVE" id="-6031680921442043495" name="Cloturer ?">
        <incomingTransition idref="4092077990966441505"/>
        <outgoingTransition idref="369489302300739051"/>
        <defaultTransition idref="2297131498812849556"/>
      </gateway>
      <gateway gatewayType="EXCLUSIVE" id="-6339559044712506375" name="Traitement ?">
        <incomingTransition idref="2618113229880968111"/>
        <outgoingTransition idref="734739271986791573"/>
        <outgoingTransition idref="6868548473501470257"/>
        <defaultTransition idref="5364657009225714086"/>
      </gateway>
      <gateway gatewayType="EXCLUSIVE" id="-6842132174994984576" name="Cloturer auto ?">
        <incomingTransition idref="1553663755118460954"/>
        <outgoingTransition idref="346522929945294218"/>
        <outgoingTransition idref="5198436680118156887"/>
        <defaultTransition idref="4556476553679255878"/>
      </gateway>
      <startEvent id="-5489198489153644616" interrupting="true" name="Début traitement">
        <outgoingTransition idref="3014373776453878543"/>
      </startEvent>
      <intermediateCatchEvent description="Quittance DI" id="-6492756262163414757" interrupting="true" name="EvtBatchClotureTaxation">
        <incomingTransition idref="4745710561266191839"/>
        <outgoingTransition idref="3788837784295851534"/>
        <catchMessageEventTrigger name="MessageEvtBatchClotureTaxation">
          <correlation>
            <key expressionType="TYPE_CONSTANT" interpreter="" name="numeroContribuable" returnType="java.lang.String" id="6102237034452631061">
              <content>numeroContribuable</content>
            </key>
            <value expressionType="TYPE_VARIABLE" interpreter="" name="numeroTiers" returnType="java.lang.Integer" id="5241819817054689298">
              <content>numeroTiers</content>
            </value>
          </correlation>
          <correlation>
            <key expressionType="TYPE_CONSTANT" interpreter="" name="periodeFiscale" returnType="java.lang.String" id="5539634227344577476">
              <content>periodeFiscale</content>
            </key>
            <value expressionType="TYPE_VARIABLE" interpreter="" name="periodeFiscale" returnType="java.lang.Integer" id="5481520429460377681">
              <content>periodeFiscale</content>
            </value>
          </correlation>
          <correlation>
            <key expressionType="TYPE_CONSTANT" interpreter="" name="typeImpot" returnType="java.lang.String" id="7664836358132475600">
              <content>typeImpot</content>
            </key>
            <value expressionType="TYPE_VARIABLE" interpreter="" name="typeImpot" returnType="java.lang.String" id="8053745017821474589">
              <content>typeImpot</content>
            </value>
          </correlation>
          <operation operatorType="ASSIGNMENT">
            <leftOperand name="evtBatchType" type="DATA"/>
            <rightOperand expressionType="TYPE_VARIABLE" interpreter="" name="evtBatchType" returnType="java.lang.String" id="7351317570307603549">
              <content>evtBatchType</content>
            </rightOperand>
          </operation>
          <operation operatorType="ASSIGNMENT">
            <leftOperand name="lastMessageContent" type="DATA"/>
            <rightOperand expressionType="TYPE_VARIABLE" interpreter="" name="messageContentUrl" returnType="java.lang.String" id="8182731801347231076">
              <content>messageContentUrl</content>
            </rightOperand>
          </operation>
        </catchMessageEventTrigger>
      </intermediateCatchEvent>
      <endEvent id="-6927032641581010587" name="Fin cloture">
        <incomingTransition idref="338639496810381054"/>
        <terminateEventTrigger/>
      </endEvent>
      <endEvent id="-6013970785068268540" name="sortie taxation auto">
        <incomingTransition idref="3129635953385098273"/>
      </endEvent>
      <endEvent id="-8012073888500614945" name="sortie taxation semi-auto">
        <incomingTransition idref="170971691103468458"/>
      </endEvent>
      <endEvent id="-8988845734914743353" name="Fin traité">
        <incomingTransition idref="2588085312356109043"/>
        <terminateEventTrigger/>
      </endEvent>
    </flowNodes>
  </flowElements>
  <dependencies>
    <parameters>
      <parameter name="versionProcessAttribution" type="java.lang.String">
        <description/>
      </parameter>
      <parameter name="esbNomApplication" type="java.lang.String">
        <description/>
      </parameter>
      <parameter name="esbDestinationIntegrerDI" type="java.lang.String">
        <description/>
      </parameter>
      <parameter name="esbNomDomaine" type="java.lang.String">
        <description/>
      </parameter>
      <parameter name="esbDestinationRetourBonita" type="java.lang.String">
        <description/>
      </parameter>
      <parameter name="visaUtilisateurSource" type="java.lang.String">
        <description/>
      </parameter>
      <parameter name="esbBonitaInstance" type="java.lang.String">
        <description/>
      </parameter>
    </parameters>
    <actors>
      <actor name="Taxateur DI">
        <description/>
      </actor>
    </actors>
  </dependencies>
</processDefinition>
